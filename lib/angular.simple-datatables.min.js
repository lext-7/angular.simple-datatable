!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){var r=angular.module("simpleDatatable",[]);angular.element('<style>.sdt-orderby { position: relative !important; }.sdt-orderby-desc { position: relative !important; }.sdt-orderby:after{content: ""; position: absolute; top: 50%; margin-top: -12px; right:8px; border-style: solid; border-width: 8px; border-color: transparent transparent #008080 transparent; }.sdt-orderby-desc:after{content: ""; position: absolute; bottom: 50%; margin-bottom: -12px; right:8px; border-style: solid; border-width: 8px; border-color: #008080 transparent transparent transparent; }</style>').appendTo("head");var o=function(t,e,r){if("$this"===r)return e;var o=t(r);return o(e)},n=function(t,e){for(var r in t){var o=t[r];if(e(o))return{item:o,index:r}}},a=function(t,e,r,n,s){if(e.length<=1)return e;for(var l=Math.floor(e.length/2),d=e.splice(l,1)[0],i=o(t,d,r),c=[],p=[],g=0;g<e.length;g++){var u,f=o(t,e[g],r);u="function"==typeof n?n(f,i):i>f,s&&(u=!u),u?c.push(e[g]):p.push(e[g])}return a(t,c,r,n,s).concat([d],a(t,p,r,n,s))};r.filter("property",["$parse","$sce",function(t,e){return function(r,n,a){var s=o(t,r,n);return s="undefined"==typeof s||null===s?"":s,"Date"==a?new Date(s):"Bool"===a?s:e.trustAsHtml(s.toString())}}]),r.directive("simpleDatatable",function(){return{restrict:"A",require:["ngModel","?sdtRowId","?sdtActionCol","?sdtPerPage","?sdtOn","?sdtSelected","?sdtKeepSelected","?sdtSelectboxHtml"],scope:{ngModel:"=",sdtOn:"=",sdtActionCol:"=",sdtRowId:"@",sdtPerPage:"@",sdtSelected:"=",sdtKeepSelected:"@",sdtSelectboxHtml:"@"},controller:["$scope","$element","$compile","$parse","$sce",function(t,e,r,s,l){var d=e.find("table"),i=d.find("thead th"),c=d.find("tbody");t.ngModel||(t.ngModel=[],console.warn("please set ng-model in simple-datatable"));var p=10;t.page=1,t.pageInput=t.page,t.sdtPerPage=t.sdtPerPage||p,t.list=[],t.currentList=[],t.totalPage=Math.ceil(t.ngModel.length/t.sdtPerPage),t.sortCol=void 0,t.sortColReverse=!1,t.sdtRowId=t.sdtRowId||"id",t.sdtSelected=t.sdtSelected||[],t.sdtSelectboxHtml=l.trustAsHtml(t.sdtSelectboxHtml||'<input type="checkbox" ng-checked="isRowSelected(row) != -1" >'),angular.copy(t.ngModel,t.list),t.colAttrs=[],i.each(function(e,r){r=angular.element(r);var o={};o.name=r.attr("sdt-col"),o.type=r.attr("sdt-col-type"),o.type||(o.type="string"),"bool"===o.type&&(o["true"]=r.attr("sdt-bool-true"),o["false"]=r.attr("sdt-bool-false")),o.name&&(t.colAttrs.push(o),e=t.colAttrs.length-1,r.attr("ng-click","sort("+e+", sortCol == "+e+")"),r.attr("class",r.attr("class")+" {{ sortCol == "+e+' ? (sortColReverse ? "sdt-orderby-desc" : "sdt-orderby" ) : ""}} ')),r.css("cursor","pointer")}),r(i)(t),t["goto"]=function(e){e&&(1>e&&(e=1),e*t.sdtPerPage>t.list.length&&(e=t.totalPage),t.page=e),t.currentList=t.list.slice((t.page-1)*t.sdtPerPage,t.page*t.sdtPerPage),t.$applyAsync()},t.click=function(e,r){function o(){t.ngModel.splice(l.index,1),t.$applyAsync()}var a=t.currentList[e],s=[r,a].concat(Array.prototype.slice.call(arguments,2));if("remove"===r){var l=n(t.ngModel,function(e){return e[t.sdtRowId]==a.id});return void(l&&("function"==typeof t.sdtOn?t.sdtOn.apply(null,s.concat([o])):o()))}"function"==typeof t.sdtOn&&t.sdtOn.apply(null,s)},t.sort=function(e,r){if("undefined"!=typeof e){t.sortCol===e&&t.sortColReverse===r&&(r=!r),t.sortColReverse=r;var o=t.colAttrs[e].name;t.list=a(s,t.list,o,void 0,r),t.sortCol=e}};var g;t.search=function(){for(var e=t.searchInput,r=[],n=0;n<t.ngModel.length;n++)for(var a=t.ngModel[n],l=0;l<t.colAttrs.length;l++){var d=t.colAttrs[l];try{if(-1!==o(s,a,d.name).toString().indexOf(e)){r.push(a);break}}catch(i){}}t.page=1,t.list=r,g=e,t.sort(t.sortCol,!1)},t.select=function(e){var r=t.isRowSelected(e);-1===r?t.sdtSelected.push(e):t.sdtSelected.splice(r,1)},t.$watch("[page, sdtPerPage, sortCol]",function(e,r){e[1]||(t.sdtPerPage=p),r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]||(r[0]!==e[0]&&(t.pageInput=t.page,t.sdtKeepSelected||(t.sdtSelected=[])),t.sdtPerPage||(t.sdtPerPage=p),t["goto"]())}),t.$watchCollection("list",function(e,r){angular.equals(r,e)||(t.totalPage=Math.ceil(t.list.length/t.sdtPerPage),t["goto"]())}),t.isRowSelected=function(e){for(var r=0;r<t.sdtSelected.length;r++)if(t.sdtSelected[r][t.sdtRowId]===e[t.sdtRowId])return r;return-1},t.trWrapper=function(){var e='<tr ng-repeat="row in currentList track by $index" class="{{isRowSelected(row) != -1? \'sdt-row-selected\' : \'\'}}"><td ng-repeat="rowAttr in colAttrs track by $index"" ><span ng-bind-html="row | property: rowAttr.name" ng-if="[\'string\'].indexOf(rowAttr.type) != -1"></span><img ng-src="{{row | property: rowAttr.name}}" ng-if="rowAttr.type == \'img\'"><span ng-if="rowAttr.type == \'selectbox\'" ng-click="select(row)">'+t.sdtSelectboxHtml+'</span><span ng-if="rowAttr.type == \'date\'">{{ (row | property: rowAttr.name : "Date") | date: "yyyy/MM/dd"}}</span><span ng-if="rowAttr.type == \'datetime\'">{{row | property: rowAttr.name:  "Date" | date: "yyyy/MM/dd hh:mm"}}</span><span ng-if="rowAttr.type == \'bool\'">{{ (row | property: rowAttr.name : "Bool") ? rowAttr.true : rowAttr.false}}</span></td>';if(t.sdtActionCol){var o=t.sdtActionCol;o=o.replace("sdt-row-remove","ng-click='click($index, \"remove\")'"),o=o.replace(/sdt-row-click="(.*?)"/g,function(t,e){return"ng-click='click($index, "+e.split(",").map(function(t){return'"'+t.trim()+'"'}).join(",")+")'"}),e+=o}e+="</tr>",c.html(r(e)(t))},t.$watchCollection("ngModel",function(e,r){angular.equals(r,e)||t.search()}),t.$watchCollection("sdtActionCol",function(e,r){angular.equals(r,e)||t.trWrapper()}),t["goto"](1),t.trWrapper(),t.searchInput="";var u=e.find("[sdt-search-input]");u.attr("ng-model","searchInput"),u.attr("ng-keydown","$event.keyCode === 13 && search()"),r(u)(t);var f=e.find("[sdt-search-btn]");f.attr("ng-click","search()"),r(f)(t);var y=e.find("[sdt-total-label]");y.html("{{list.length}}"),r(y)(t);var h=e.find("[sdt-total-page]");h.html("{{totalPage}}"),r(h)(t);var m=e.find("[sdt-page]");m.html("{{page}}"),r(m)(t);var w=e.find("[sdt-page-input]");w.attr("ng-model","pageInput"),w.attr("max","{{totalPage}}"),r(w)(t);var v=e.find("[sdt-page-btn]");v.attr("ng-click","goto(pageInput)"),r(v)(t),v=e.find("[sdt-prev-btn]"),v.attr("ng-click","goto(page - 1)"),v.attr("ng-show","page != 1 && totalPage != 0"),r(v)(t),v=e.find("[sdt-next-btn]"),v.attr("ng-click","goto(page + 1)"),v.attr("ng-show","page < totalPage"),r(v)(t),t.$applyAsync()}]}})}]);